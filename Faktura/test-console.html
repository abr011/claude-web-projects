<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Console Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .console { background: #000; color: #0f0; padding: 15px; font-family: monospace; height: 400px; overflow-y: auto; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        button { margin: 5px; padding: 10px; }
    </style>
</head>
<body>
    <h1>üß™ Test konzole pro fakturaƒçn√≠ aplikaci</h1>
    
    <div class="test-section">
        <h2>Test naƒç√≠t√°n√≠ komponent≈Ø</h2>
        <button onclick="testComponentLoading()">Test komponent≈Ø</button>
        <button onclick="testAppState()">Test AppState</button>
        <button onclick="testLocalStorageData()">Test dat v localStorage</button>
    </div>
    
    <div id="console" class="console"></div>

    <script src="script.js"></script>
    <script src="components/header.js"></script>
    <script src="components/navigation.js"></script>
    <script src="components/invoice-card.js"></script>
    <script src="components/invoice-list.js"></script>
    <script src="components/invoice-form.js"></script>

    <script>
        function log(message, type = 'info') {
            const console = document.getElementById('console');
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            console.innerHTML += `${timestamp} ${prefix} ${message}\n`;
            console.scrollTop = console.scrollHeight;
        }

        function testComponentLoading() {
            log('=== TEST NAƒå√çT√ÅN√ç KOMPONENT≈Æ ===');
            
            const requiredComponents = [
                'HeaderComponent', 
                'NavigationComponent', 
                'InvoiceCardComponent', 
                'InvoiceListComponent', 
                'InvoiceFormComponent'
            ];
            
            requiredComponents.forEach(componentName => {
                if (window[componentName]) {
                    log(`‚úÖ ${componentName} naƒçten`, 'success');
                } else {
                    log(`‚ùå ${componentName} CHYB√ç!`, 'error');
                }
            });
            
            log('=== TEST GLOB√ÅLN√çCH FUNKC√ç ===');
            const requiredFunctions = [
                'AppState',
                'ComponentSystem', 
                'showNotification',
                'formatCurrency',
                'formatDate'
            ];
            
            requiredFunctions.forEach(funcName => {
                if (window[funcName]) {
                    log(`‚úÖ ${funcName} dostupn√°`, 'success');
                } else {
                    log(`‚ùå ${funcName} CHYB√ç!`, 'error');
                }
            });
        }

        function testAppState() {
            log('=== TEST APPSTATE ===');
            
            if (!window.AppState) {
                log('‚ùå AppState nen√≠ dostupn√Ω!', 'error');
                return;
            }
            
            try {
                // Test naƒçten√≠ dat
                AppState.loadFromStorage();
                log(`üìä Faktury v AppState: ${AppState.invoices.length}`, 'info');
                
                if (AppState.invoices.length > 0) {
                    AppState.invoices.forEach((inv, index) => {
                        log(`  ${index + 1}. ${inv.number} - ${inv.clientName} - ${inv.amount} Kƒç`);
                    });
                } else {
                    log('‚ö†Ô∏è ≈Ω√°dn√© faktury v AppState');
                }
                
                // Test p≈ôid√°n√≠ testovac√≠ch dat
                if (AppState.invoices.length === 0) {
                    log('üìù P≈ôid√°v√°m testovac√≠ data...');
                    AppState.addTestData();
                    log(`üìä Po p≈ôid√°n√≠: ${AppState.invoices.length} faktur`, 'success');
                }
                
            } catch (error) {
                log(`‚ùå Chyba v AppState: ${error.message}`, 'error');
            }
        }

        function testLocalStorageData() {
            log('=== TEST LOCALSTORAGE ===');
            
            // Test faktur
            const invoiceData = localStorage.getItem('invoiceApp_data');
            if (invoiceData) {
                try {
                    const invoices = JSON.parse(invoiceData);
                    log(`‚úÖ LocalStorage faktury: ${invoices.length} polo≈æek`, 'success');
                } catch (error) {
                    log(`‚ùå Chyba parsov√°n√≠ faktur: ${error.message}`, 'error');
                }
            } else {
                log('‚ö†Ô∏è ≈Ω√°dn√© faktury v localStorage');
            }
            
            // Test klient≈Ø
            const clientData = localStorage.getItem('invoiceApp_clients');
            if (clientData) {
                try {
                    const clients = JSON.parse(clientData);
                    log(`‚úÖ LocalStorage klienti: ${clients.length} polo≈æek`, 'success');
                } catch (error) {
                    log(`‚ùå Chyba parsov√°n√≠ klient≈Ø: ${error.message}`, 'error');
                }
            } else {
                log('‚ö†Ô∏è ≈Ω√°dn√≠ klienti v localStorage');
            }
        }

        // Automaticky spustit testy
        window.onload = function() {
            setTimeout(() => {
                testComponentLoading();
                testAppState();
                testLocalStorageData();
            }, 1000);
        };
    </script>
</body>
</html>