<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rychl√Ω Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: white; }
        .debug-box { border: 1px solid #ccc; padding: 15px; margin: 10px 0; }
        .result { font-weight: bold; color: #007bff; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üêõ Rychl√Ω Debug</h1>
    
    <div class="debug-box">
        <h3>1. LocalStorage - Klienti</h3>
        <div id="clients-debug"></div>
        <button onclick="fixClientsData()">Opravit data klient≈Ø</button>
    </div>
    
    <div class="debug-box">
        <h3>2. Test stylov√°n√≠ datum≈Ø</h3>
        <div>Norm√°ln√≠: <span id="date-normal"></span></div>
        <div>Stylovan√©: <span id="date-styled"></span></div>
        <button onclick="testDateStyling()">Test styl≈Ø</button>
    </div>

    <script>
        // Test klient≈Ø
        function debugClients() {
            const clientData = localStorage.getItem('invoiceApp_clients');
            const clientsDiv = document.getElementById('clients-debug');
            
            if (clientData) {
                try {
                    const clients = JSON.parse(clientData);
                    clientsDiv.innerHTML = `<div class="result">‚úÖ Nalezeno ${clients.length} klient≈Ø:</div>`;
                    clients.forEach((client, i) => {
                        clientsDiv.innerHTML += `<div>${i+1}. ${client.name} (IƒåO: ${client.ico})</div>`;
                    });
                } catch (error) {
                    clientsDiv.innerHTML = `<div class="error">‚ùå Chyba p≈ôi parsov√°n√≠: ${error.message}</div>`;
                }
            } else {
                clientsDiv.innerHTML = `<div class="error">‚ö†Ô∏è ≈Ω√°dn√≠ klienti v localStorage</div>`;
            }
        }

        function fixClientsData() {
            const testClients = [
                {
                    name: 'ABC s.r.o.',
                    address: 'Pra≈æsk√° 456\\n120 00 Praha 2',
                    street: 'Pra≈æsk√° 456',
                    city: 'Praha 2', 
                    postal: '120 00',
                    ico: '12345678',
                    dic: 'CZ12345678'
                },
                {
                    name: 'XYZ spol. s r.o.',
                    address: 'Brnƒõnsk√° 789\\n602 00 Brno',
                    street: 'Brnƒõnsk√° 789',
                    city: 'Brno',
                    postal: '602 00', 
                    ico: '87654321',
                    dic: 'CZ87654321'
                }
            ];
            
            localStorage.setItem('invoiceApp_clients', JSON.stringify(testClients));
            alert('‚úÖ Data klient≈Ø opravena!');
            debugClients();
        }

        // Test stylov√°n√≠
        function testDateStyling() {
            // Inline CSS pro test
            const style = document.createElement('style');
            style.textContent = `
                .date-format .year { color: #888888 !important; font-weight: normal !important; }
                .date-format .day-month { font-weight: 500 !important; }
            `;
            document.head.appendChild(style);
            
            const today = new Date();
            const formatted = today.toLocaleDateString('cs-CZ', {
                day: 'numeric', month: 'numeric', year: 'numeric'
            });
            
            // Norm√°ln√≠
            document.getElementById('date-normal').textContent = formatted;
            
            // Stylovan√©
            const parts = formatted.split('.');
            if (parts.length === 3) {
                const dayMonth = parts[0] + '.' + parts[1] + '.';
                const year = parts[2];
                document.getElementById('date-styled').innerHTML = 
                    `<span class="date-format"><span class="day-month">${dayMonth}</span><span class="year">${year}</span></span>`;
            }
        }

        // Automaticky spustit p≈ôi naƒçten√≠
        window.onload = function() {
            debugClients();
            testDateStyling();
        };
    </script>
</body>
</html>