<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalend√°≈ô test</title>
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        .date-field {
            border: 2px solid #007bff;
            padding: 10px;
            margin: 20px 0;
            cursor: pointer;
            background: white;
            border-radius: 4px;
            width: 200px;
            position: relative;
        }
        
        .calendar-popup {
            position: fixed;
            background: white;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
            min-width: 200px;
        }
        
        .calendar-popup button {
            display: block;
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            background: white;
        }
        
        .calendar-popup button:hover {
            background: #e3f2fd;
        }
    </style>
</head>
<body>
    <h1>üìÖ Test kalend√°≈ôe</h1>
    
    <p>Klikni na pole:</p>
    <div id="test-date" class="date-field" onclick="openCalendar(event, 'test-date')">
        14.8.2025
    </div>
    
    <div id="calendar" class="calendar-popup">
        <h4>V√Ωbƒõr data:</h4>
        <button onclick="selectDate('13.8.2025')">Vƒçera (13.8.2025)</button>
        <button onclick="selectDate('14.8.2025')">Dnes (14.8.2025)</button>
        <button onclick="selectDate('15.8.2025')">Z√≠tra (15.8.2025)</button>
        <button onclick="closeCalendar()" style="background: #f5f5f5; margin-top: 10px;">Zav≈ô√≠t</button>
    </div>

    <script>
        let currentField = null;
        
        function openCalendar(event, fieldId) {
            console.log('üñ±Ô∏è KLIK DETEKOV√ÅN na:', fieldId);
            
            currentField = document.getElementById(fieldId);
            const calendar = document.getElementById('calendar');
            
            // Pozicov√°n√≠ kalend√°≈ôe
            const rect = currentField.getBoundingClientRect();
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const calendarWidth = 220; // p≈ôibli≈æn√° ≈°√≠≈ôka kalend√°≈ôe
            const calendarHeight = 200; // p≈ôibli≈æn√° v√Ω≈°ka kalend√°≈ôe
            
            let left = rect.right + 10; // vpravo od pole
            let top = rect.top;
            
            // Pokud by se kalend√°≈ô neve≈°el vpravo, dej ho vlevo
            if (left + calendarWidth > viewportWidth) {
                left = rect.left - calendarWidth - 10;
            }
            
            // Pokud by se kalend√°≈ô neve≈°el vlevo, dej ho pod pole
            if (left < 0) {
                left = rect.left;
                top = rect.bottom + 10;
            }
            
            // Pokud by se kalend√°≈ô neve≈°el dol≈Ø, dej ho nahoru
            if (top + calendarHeight > viewportHeight) {
                top = rect.top - calendarHeight - 10;
            }
            
            // Zajisti, ≈æe kalend√°≈ô bude v oknƒõ
            if (top < 0) top = 10;
            if (left < 0) left = 10;
            
            calendar.style.left = left + 'px';
            calendar.style.top = top + 'px';
            calendar.style.display = 'block';
            
            console.log('üìÖ Kalend√°≈ô zobrazen na pozici:', left, top);
        }
        
        function selectDate(dateStr) {
            if (currentField) {
                currentField.textContent = dateStr;
                console.log('üìÖ Datum vybr√°no:', dateStr);
            }
            closeCalendar();
        }
        
        function closeCalendar() {
            document.getElementById('calendar').style.display = 'none';
            currentField = null;
            console.log('üìÖ Kalend√°≈ô zav≈ôen');
        }
        
        // Zav≈ôi kalend√°≈ô p≈ôi kliknut√≠ mimo nƒõj
        document.addEventListener('click', function(event) {
            const calendar = document.getElementById('calendar');
            const field = document.getElementById('test-date');
            
            if (!calendar.contains(event.target) && event.target !== field) {
                closeCalendar();
            }
        });
        
        console.log('‚úÖ Test str√°nka naƒçtena');
    </script>
</body>
</html>